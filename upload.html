<!DOCTYPE html>
<html>
  <head>
    <script>
      function uploadReceipt() {
  const file = document.getElementById('file').files[0];
  if (!file) {
    alert('Seleziona un file!');
    return;
  }
  const reader = new FileReader();
  reader.onload = function(e) {
    const base64 = e.target.result.split(',')[1];
    const groupId = localStorage.getItem('groupId');
    const url = 'https://script.google.com/macros/s/AKfycbwtAZjOh6JwuIXiDo2L6nRepq1InlY68n1Av14nPu9Jgt-rJBI4879HfiGkHmWtfjeo/exec'
      + '?action=uploadFile'
      + '&base64Data=' + encodeURIComponent(base64)
      + '&fileName=' + encodeURIComponent(groupId + "_Receipt.png")
      + '&groupId=' + encodeURIComponent(groupId);

    fetch(url, {
      method: 'GET'
    })
    .then(response => response.text())
    .then(result => {
      alert('Ricevuta caricata con successo!');
    })
    .catch(error => {
      alert('Errore durante il caricamento: ' + error);
    });
  };
  reader.readAsDataURL(file);
}
    </script>
  </head>
  <body>
    <h3>Upload Payment Receipt</h3>
    <input type="file" id="file" accept="image/*"><br><br>
    <button onclick="uploadReceipt()">Upload</button>
  </body>
</html>
